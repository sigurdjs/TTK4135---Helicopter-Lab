\documentclass[11pt, a4paper, USenglish]{article} % change ``USenglish'' to ``norsk'' if applicable.

% Search http://ctan.org or type texdoc <package name> in a terminal to access LaTeX package documentation.
\usepackage{babel} % babel and csquotes are packages for multilingual (e.g. Norwegian) support.
\usepackage[T1]{fontenc} % See http://tex.stackexchange.com/questions/664/why-should-i-use-usepackaget1fontenc
\usepackage[utf8]{inputenc} % See http://tex.stackexchange.com/questions/44694/fontenc-vs-inputenc
\usepackage{csquotes} % Needs to be loaded after inputenc.
\usepackage{amsmath} % See: http://tex.stackexchange.com/questions/32100/what-does-each-ams-package-do
\usepackage{amssymb} % See above.
\usepackage[squaren]{SIunits} % Provides SI units like \meter. The squaren option is due to a conflict with amssymb.
\usepackage{graphicx} % Provides the \includegraphics command.
\usepackage{caption}
\usepackage{subcaption} % More and better captions for figures
\usepackage{booktabs} % Better tables. Provides \toprule, \midrule, \bottomrule.
\usepackage{listings} % Provides source code listings.
\usepackage{todonotes} % Provides several handy TODO commands.
\usepackage[
  backend=biber,
  style=numeric,
  isbn=false,
  doi=false]{biblatex} % http://tex.stackexchange.com/questions/25701/bibtex-vs-biber-and-biblatex-vs-natbib
\usepackage{bm}
\usepackage{hyperref} % Provides clickable links. Always load last, but before cleveref.
\usepackage{tikz}     % For fancy drawing
\usetikzlibrary{arrows.meta}
\usepackage{pgfplots}
\usepackage[intoc]{nomencl}
\makenomenclature
\usepackage[toc,page]{appendix}
\usepackage{etoolbox}
\renewcommand\nomgroup[1]{%
  \item[\bfseries
  \ifstrequal{#1}{P}{Parameters}{%
  \ifstrequal{#1}{V}{Variables}{}}%
]}
\newcommand{\nomunit}[1]{%
\renewcommand{\nomentryend}{\hspace*{\fill}#1}}

\pgfplotsset{compat=newest}
\pgfplotsset{plot coordinates/math parser=false}

\addbibresource{bibliography.bib} % Makes the bibliography file available to biblatex.

% ``listings'' package settings
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{pink}{rgb}{0.63, 0.13, 0.94}
\lstset{language=Matlab,
	keywords={break, case, catch, continue,else,elseif,end,for,function,global,if,otherwise,persistent,return,switch,try,while},
	basicstyle=\ttfamily,
	keywordstyle=\color{blue},
	commentstyle=\color{dkgreen},
	stringstyle=\color{pink},
	numbers=left,
	numberstyle=\tiny\color{gray},
	stepnumber=1,
	numbersep=10pt,
	backgroundcolor=\color{white},
	tabsize=4,
	showspaces=false,
    showstringspaces=false
}
% Disable automatic indentation (equal to using \noindent)
\setlength{\parindent}{0cm}

% Command for bold matrix font
%\newcommand{\matr}[1]{\bm{#1}} %Bold italics
%\newcommand{\matr}[1]{\mathbf{#1}} %Bold
\newcommand{\matr}[1]{{#1}} %Plain italics

% Vertical bars in amsmath matrix environment
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother

% Matrix environment for subscript
\newenvironment{sbmatrix}[1]
 {\def\mysubscript{#1}\mathop\bgroup\begin{bmatrix}}
 {\end{bmatrix}\egroup_{\textstyle\mathstrut\mysubscript}}

\newenvironment{spmatrix}[1]
 {\def\mysubscript{#1}\mathop\bgroup\begin{pmatrix}}
 {\end{pmatrix}\egroup_{\textstyle\mathstrut\mysubscript}}


\usepackage{cleveref} % Provides the \Cref command, for cross-referencing of equations, sections, figures and tables. Always load last.
